{"path":"Introduction/Sending-HTTP-requests","templateID":0,"sharedPropsHashes":{"sidebarTree":"ZSQH06"},"localProps":{"page":{"path":"/Introduction/Sending-HTTP-requests","parsedPath":["pages","/Introduction","data","children",0],"title":"Sending HTTP requests","route":{"path":"/Sending-HTTP-requests"},"data":{"blocks":[{"type":"text","data":"## Sending HTTP requests\nThe Allele Registry API is based on HTTP requests. There are three types of HTTP requests used by this API: **GET**, **POST** and **PUT**. All HTTP **GET** requests can be send with the use of any Internet browser (just copy the URL to the address bar), but for sending **POST** and **PUT** requests some more advanced tool is needed. Moreover, all **PUT** requests requires authentication, what is described in the next section. Ready scripts for sending **POST** and **PUT** requests with payload loaded from given file can be found at [https://reg.genome.network/doc/scripts](https://reg.genome.network/doc/scripts).\n\nBelow you can find examples how to send **GET**, **POST** and **PUT** requests from bash console and from chosen programming languages. Variables “login” and “password” must be set in advance."},{"type":"text","data":"### Bash\nThese sections contain sequence of commands which may be run from bash console (by copy & paste).They require some additional tools like curl or sha1sum and depend on standard tools like *echo*, *cut*, etc.. Different behavior of these dependencies may perturb some examples. However provided code snippets should work on the majority of modern Linux distributions."},{"type":"code","data":"# ====== send a GET request with parameter\nURL=\"http://reg.test.genome.network/allele?hgvs=NC_000010.11:g.87894077C>T\"\n# convert symbol > to special code %3E\nURL=${URL//>/%3E}\ncurl -X GET \"${URL}\"\n\n# ====== send a POST requests with parameter and payload taken from the file alleles.txt\nURL=\"http://reg.test.genome.network/alleles?file=hgvs\"\ncurl -X POST \"${URL}\" --data-binary @alleles.txt\n\n# ====== calculate authentication parameters and send a PUT request\n# you have to set LOGIN and PASSWORD here\nURL=\"http://reg.test.genome.network/allele?hgvs=NC_000010.11:g.87894077del\"\nIDENTITY=`echo -n \"${LOGIN}${PASSWORD}\" | sha1sum | cut -d \\ -f 1`\nTIME=`date +%s | tr -d \"\\n\"`\nTOKEN=`echo -n \"${URL}${IDENTITY}${TIME}\" | sha1sum | cut -d \\ -f 1`\nREQUEST=\"${URL}&gbLogin=${LOGIN}&gbTime=${TIME}&gbToken=${TOKEN}\"\ncurl -X PUT \"${REQUEST}\"","header":{},"config":{"mode":"shell"}},{"type":"text","data":"### Ruby\nAll included ruby code snippets should work with ruby version >= 1.8.7."},{"type":"code","data":"require 'net/http'\nrequire 'digest/sha1'\n\n# ====== send a GET request with parameter\nurl = 'http://reg.test.genome.network/allele?hgvs=NC_000010.11:g.87894077C>T'\nurl = URI.escape(url) # convert symbol > to special code %3E\nhttp = Net::HTTP.new(URI(url).host)\nreq = Net::HTTP::Get.new(url)\nres = http.request(req)\nprint res.body\n\n# ====== send a POST requests with parameter and payload taken from the file alleles.txt\nurl = 'http://reg.test.genome.network/alleles?file=hgvs'\nhttp = Net::HTTP.new(URI(url).host)\nreq = Net::HTTP::Post.new(url)\nreq.body = File.open('alleles.txt').read\nres = http.request(req)\nprint res.body\n\n# ====== calculate authentication parameters and send a PUT request\n# you have to set login and password here\nurl = 'http://reg.test.genome.network/allele?hgvs=NC_000010.11:g.87894077del'\nidentity = Digest::SHA1.hexdigest(\"#{login}#{password}\")\ngbTime = Time.now.to_i.to_s\ntoken = Digest::SHA1.hexdigest(\"#{url}#{identity}#{gbTime}\")\nrequest = \"#{url}&gbLogin=#{login}&gbTime=#{gbTime}&gbToken=#{token}\"\nhttp = Net::HTTP.new(URI(url).host)\nreq = Net::HTTP::Put.new(request)\nres = http.request(req)\nprint res.body","header":{},"config":{"mode":"ruby"}},{"type":"text","data":"### Python\nPython code snippets should work with python version >= 2.7. The library “request” is not a part of the\nPython Standard Library and probably must be installed separately (in Linux it should be available\nthrough default package manager)."},{"type":"code","data":"import requests\nimport hashlib\nimport time\n\n# ====== send a GET request with parameter\nurl = 'http://reg.test.genome.network/allele?hgvs='\n# convert symbol > to special code %3E\nurl += requests.utils.quote(\"NC_000010.11:g.87894077C>T\")\nres = requests.get(url)\nprint(res.text)\n\n# ====== send a POST requests with parameter and payload taken from the file alleles.txt\nurl = 'http://reg.test.genome.network/alleles?file=hgvs'\nres = requests.post(url, data=open('alleles.txt').read())\nprint(res.text)\n\n# ====== calculate authentication parameters and send a PUT request\n# you have to set login and password here\nurl = 'http://reg.test.genome.network/allele?hgvs=NC_000010.11:g.87894077del'\nidentity = hashlib.sha1((login + password).encode('utf-8')).hexdigest()\ngbTime = str(int(time.time()))\ntoken = hashlib.sha1((url + identity + gbTime).encode('utf-8')).hexdigest()\nrequest = url + '&gbLogin=' + login + '&gbTime=' + gbTime + '&gbToken=' + token\nres = requests.put(request)\nprint(res.text)","config":{"mode":"python"}}],"children":[]},"isSubpage":true,"rootPagePath":"/Introduction","meta":{"title":"Sending HTTP requests - Introduction"}},"crumbs":[{"content":"Introduction","to":"/Introduction"},{"content":"Sending HTTP requests","to":"/Introduction/Sending-HTTP-requests"}]}}